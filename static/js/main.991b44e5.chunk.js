(this["webpackJsonpreact-gh-pages"]=this["webpackJsonpreact-gh-pages"]||[]).push([[0],{201:function(e,t,o){e.exports=o(372)},206:function(e,t,o){},207:function(e,t,o){},372:function(e,t,o){"use strict";o.r(t);var a=o(17),r=o.n(a),i=o(191),l=o.n(i),n=(o(206),o(192)),s=o(193),c=o(197),d=o(194),h=o(83),v=o(198),p=(o(207),o(105)),u=o(196),C=o(199),g=o(155),f=o(24),b=o.n(f);function m(e,t,o){return e>0?k(t,Math.abs(e)):e<0?k(o,Math.abs(e)):"#D3D3D3"}function k(e,t){if(t<0)return e;var o=parseInt(e.slice(1,3),16),a=parseInt(e.slice(3,5),16),r=parseInt(e.slice(5,7),16);return y(o=parseInt(o+(225-o)*(1-t)),a=parseInt(a+(225-a)*(1-t)),r=parseInt(r+(225-r)*(1-t)))}function y(e,t,o){return"#"+((1<<24)+(e<<16)+(t<<8)+o).toString(16).slice(1)}function P(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16),a:1}:null}p.d(C.a);var x=function(e){function t(e){var o;return Object(n.a)(this,t),(o=Object(c.a)(this,Object(d.a)(t).call(this,e))).onFileChange=function(e){var t=e.target.files[0],a=new FileReader;a.readAsText(t);var r=Object(h.a)(o);a.onload=function(e){for(var t=function(e){for(var t=e.split("\n"),o=["variable1","var1_domain","variable2","var2_domain","coef","value","linkColor","label\r"],a=[],r=1;r<t.length;r++){for(var i={},l=t[r].split(","),n=0;n<o.length;n++)i[o[n]]=l[n];a.push(i)}return a}(e.target.result),o=t.filter((function(e){return Math.abs(parseFloat(e.coef))>=r.state.threshold})),a=0;a<o.length;a++){var i=y(r.state.positiveCorrelationColor.r,r.state.positiveCorrelationColor.g,r.state.positiveCorrelationColor.b),l=y(r.state.negativeCorrelationColor.r,r.state.negativeCorrelationColor.g,r.state.negativeCorrelationColor.b);o[a].linkColor=m(parseFloat(o[a].coef),i,l),console.log(o[a].linkColor),o[a].value=Math.abs(parseFloat(o[a].coef)),o[a].label=Math.round(1e3*parseFloat(o[a].coef))/1e3}r.setState({data:t}),r.setState({filteredData:o})}},o.handlePositiveColorPickerButtonClick=function(){o.setState({displayPositiveColorPicker:!o.state.displayPositiveColorPicker})},o.handleNegativeColorPickerButtonClick=function(){o.setState({displayNegativeColorPicker:!o.state.displayNegativeColorPicker})},o.handlePositiveColorPickerClose=function(){o.setState({displayPositiveColorPicker:!1})},o.handleNegativeColorPickerClose=function(){o.setState({displayNegativeColorPicker:!1})},o.handlePositiveColorPickerChange=function(e){o.setState({positiveCorrelationColor:e.rgb})},o.handleNegativeColorPickerChange=function(e){o.setState({negativeCorrelationColor:e.rgb})},o.handleSubmit=function(){for(var e=Object(h.a)(o),t=e.state.filteredData,a=0;a<t.length;a++){var r=y(e.state.positiveCorrelationColor.r,e.state.positiveCorrelationColor.g,e.state.positiveCorrelationColor.b),i=y(e.state.negativeCorrelationColor.r,e.state.negativeCorrelationColor.g,e.state.negativeCorrelationColor.b);t[a].linkColor=m(parseFloat(t[a].coef),r,i)}o.setState({test:!e.state.est})},o.state={test:!1,threshold:.6,displayColorPicker:!1,displayPositiveColorPicker:!1,displayNegativeColorPicker:!1,positiveCorrelationColor:P("#4F75D2"),negativeCorrelationColor:P("#DF3C3C"),data:[{variable1:"",var1_domain:"",variable2:"",var2_domain:"",coef:"0",value:"0",linkColor:"#c1cc3d",rounded:"0"}]},o.handleThresholdChange=o.handleThresholdChange.bind(Object(h.a)(o)),o.handleThresholdSubmit=o.handleThresholdSubmit.bind(Object(h.a)(o)),o}return Object(v.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(){var e=p.c("chartdiv",u.a);e.exporting.menu=new p.a,e.exporting.filePrefix="exposome-globe",e.colors.saturation=.45,e.data=this.state.filteredData,e.dataFields.fromName="var1_domain",e.dataFields.toName="var2_domain",e.dataFields.value="value",e.nodePadding=.5,e.minNodeSize=.01,e.sortBy="value",e.fontSize=15,e.fontFamily="Open Sans";var t=e.nodes.template;t.propertyFields.fill="color",t.events.on("over",(function(e){var t=e.target;t.outgoingDataItems.each((function(e){e.toNode&&(e.link.isHover=!0,e.toNode.label.isHover=!0)})),t.incomingDataItems.each((function(e){e.fromNode&&(e.link.isHover=!0,e.fromNode.label.isHover=!0)})),t.label.isHover=!0})),t.events.on("out",(function(e){var t=e.target;t.outgoingDataItems.each((function(e){e.toNode&&(e.link.isHover=!1,e.toNode.label.isHover=!1)})),t.incomingDataItems.each((function(e){e.fromNode&&(e.link.isHover=!1,e.fromNode.label.isHover=!1)})),t.label.isHover=!1}));var o=t.label;o.relativeRotation=90,o.fillOpacity=.4,o.marginTop=100,o.states.create("hover").properties.fillOpacity=1,t.cursorOverStyle=p.b.pointer;var a=e.links.template;a.strokeOpacity=0,a.fillOpacity=.15,a.tooltipText="{variable1} \u2192 {variable2}: {label}",a.colorMode="solid",a.propertyFields.fill="linkColor",e.sortBy="name",a.clickable=!1;var r=a.states.create("hover");r.properties.fillOpacity=1,r.properties.strokeOpacity=1}},{key:"componentWillUnmount",value:function(){this.chart&&this.chart.dispose()}},{key:"handleThresholdChange",value:function(e){var t=this.state.data.filter((function(t){return Math.abs(parseFloat(t.coef))>=e.target.value}));this.setState({threshold:e.target.value}),this.setState({filteredData:t})}},{key:"handleThresholdSubmit",value:function(e){e.preventDefault()}},{key:"render",value:function(){var e=b()({default:{color:{width:"36px",height:"14px",borderRadius:"2px",background:"rgba(".concat(this.state.positiveCorrelationColor.r,", ").concat(this.state.positiveCorrelationColor.g,", ").concat(this.state.positiveCorrelationColor.b,", ").concat(this.state.positiveCorrelationColor.a,")")},swatch:{padding:"5px",background:"#fff",borderRadius:"1px",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",display:"inline-block",cursor:"pointer"},popover:{position:"absolute",zIndex:"2"},cover:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}}}),t=b()({default:{color:{width:"36px",height:"14px",borderRadius:"2px",background:"rgba(".concat(this.state.negativeCorrelationColor.r,", ").concat(this.state.negativeCorrelationColor.g,", ").concat(this.state.negativeCorrelationColor.b,", ").concat(this.state.negativeCorrelationColor.a,")")},swatch:{padding:"5px",background:"#fff",borderRadius:"1px",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",display:"inline-block",cursor:"pointer"},popover:{position:"absolute",zIndex:"2"},cover:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}}});return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleThresholdSubmit},r.a.createElement("label",null,"Threshold: ",r.a.createElement("textarea",{value:this.state.threshold,onChange:this.handleThresholdChange})),r.a.createElement("br",null),r.a.createElement("input",{type:"file",onChange:this.onFileChange})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("div",{style:e.swatch,onClick:this.handlePositiveColorPickerButtonClick},r.a.createElement("div",{style:e.color})),this.state.displayPositiveColorPicker?r.a.createElement("div",{style:e.popover},r.a.createElement("div",{style:e.cover,onClick:this.handlePositiveColorPickerClose}),r.a.createElement(g.SketchPicker,{color:this.state.positiveCorrelationColor,onChange:this.handlePositiveColorPickerChange})):null,r.a.createElement("button",{onClick:this.handleSubmit},"Update colors")),r.a.createElement("div",null,r.a.createElement("div",{style:t.swatch,onClick:this.handleNegativeColorPickerButtonClick},r.a.createElement("div",{style:t.color})),this.state.displayNegativeColorPicker?r.a.createElement("div",{style:t.popover},r.a.createElement("div",{style:t.cover,onClick:this.handleNegativeColorPickerClose}),r.a.createElement(g.SketchPicker,{color:this.state.negativeCorrelationColor,onChange:this.handleNegativeColorPickerChange})):null),r.a.createElement("a",{href:"https://raw.githubusercontent.com/brinkmanlab/exposomeglobe/master/data/sample_small.csv?token=AI7O3IS7RRGKDBJTGIFAULK6MXEO2",download:!0},"Sample file"),r.a.createElement("div",{id:"chartdiv",style:{width:"100%",height:"875px"}}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[201,1,3]]]);
//# sourceMappingURL=main.991b44e5.chunk.js.map